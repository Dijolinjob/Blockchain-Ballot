{"ast":null,"code":"var _jsxFileName = \"D:\\\\Blockchain Ballot\\\\frontend\\\\src\\\\pages\\\\AllUsers\\\\AllUser.js\",\n    _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport { useContext, useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router';\nimport Loading from '../../components/Loading';\nimport { Link } from 'react-router-dom';\nimport AuthContext from '../../store/auth-context';\nimport ShowUser from './ShowUser';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst AllUser = () => {\n  _s();\n\n  const {\n    user,\n    notify\n  } = useContext(AuthContext);\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n  useEffect(() => {\n    const b = async () => {\n      if (!user) {\n        notify('You need to login first', 'error');\n        console.log(\"1\"); // navigate('/login');\n      } else {\n        if (user.role === 'user') {\n          notify('You do not have access to this route', 'error');\n          console.log(\"2\"); // navigate('/');\n        } else {\n          console.log(\"3\"); //get user data\n\n          try {\n            console.log(\"4\");\n            setLoading(true);\n            const response = await axios.get('/election/allUsers', {\n              withCredentials: true\n            });\n            setUsers(response.data.users);\n          } catch (err) {\n            console.log(\"5\");\n            notify(err.response.data.errMessage, 'error');\n          }\n\n          setLoading(false);\n        }\n      }\n    };\n\n    b();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [loading && /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 22\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col mt-5 overflow-x-hidden overflow-y-hidden\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"-my-2 overflow-x-auto sm:-mx-8 sm:px-4 lg:px-8\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"mt-5 text-center text-3xl font-bold mb-8 text-gray-900\",\n              children: \"All users\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 51,\n              columnNumber: 22\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"min-w-full divide-y divide-gray-300 overflow-x-scroll \",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                className: \"bg-indigo-500\",\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"col\",\n                    className: \"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider\",\n                    children: \"Name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 59,\n                    columnNumber: 31\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"col\",\n                    className: \"px-6 mx-12 py-3 text-left text-xs font-medium text-white uppercase tracking-wider max-w-md\",\n                    children: \"Ethereum Address\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 65,\n                    columnNumber: 31\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"col\",\n                    className: \"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider\",\n                    children: \"Status\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 71,\n                    columnNumber: 31\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"col\",\n                    className: \"px-2 py-3 text-left text-xs font-medium text-white uppercase tracking-wider\",\n                    children: \"Role\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 77,\n                    columnNumber: 31\n                  }, this), user && !user.electionOngoing && /*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"col\",\n                    className: \"relative px-6 py-3\",\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"sr-only\",\n                      children: \"Delete\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 85,\n                      columnNumber: 37\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 84,\n                    columnNumber: 34\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 58,\n                  columnNumber: 28\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 57,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                className: \"bg-white divide-y divide-gray-200\",\n                children: users.length > 0 && users.map((singleUser, element) => /*#__PURE__*/_jsxDEV(ShowUser, {\n                  id: singleUser._id,\n                  user: singleUser,\n                  setLoading: setLoading,\n                  loading: loading,\n                  setUsers: setUsers\n                }, element, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 93,\n                  columnNumber: 34\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 90,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 22\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 19\n          }, this), !loading && user && !user.electionOngoing && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"border border-transparent py-2 mt-5 w-40 rounded-md text-sm font-medium text-white bg-indigo-500 hover:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-400\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/addUser\",\n              children: \" Register user\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 22\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 16\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 10\n    }, this), !loading && users.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No user\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 45\n    }, this)]\n  }, void 0, true);\n};\n\n_s(AllUser, \"OJ7UJGeAMtykX7dE9CFvTdvgyNo=\", false, function () {\n  return [useNavigate];\n});\n\n_c = AllUser;\nexport default AllUser;\n\nvar _c;\n\n$RefreshReg$(_c, \"AllUser\");","map":{"version":3,"sources":["D:/Blockchain Ballot/frontend/src/pages/AllUsers/AllUser.js"],"names":["axios","useContext","useEffect","useState","useNavigate","Loading","Link","AuthContext","ShowUser","AllUser","user","notify","users","setUsers","loading","setLoading","navigate","b","console","log","role","response","get","withCredentials","data","err","errMessage","electionOngoing","length","map","singleUser","element","_id"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport { useContext, useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router';\r\nimport Loading from '../../components/Loading';\r\nimport { Link } from 'react-router-dom';\r\nimport AuthContext from '../../store/auth-context';\r\nimport ShowUser from './ShowUser';\r\nconst AllUser = () => {\r\n   const { user, notify } = useContext(AuthContext);\r\n   const [users, setUsers] = useState([]);\r\n   const [loading, setLoading] = useState(false);\r\n   const navigate = useNavigate();\r\n   useEffect(() => {\r\n      const b = async () => {\r\n         if (!user) {\r\n            notify('You need to login first', 'error');\r\n            console.log(\"1\")\r\n            // navigate('/login');\r\n         } else {\r\n            if (user.role === 'user') {\r\n               notify('You do not have access to this route', 'error');\r\n               console.log(\"2\")\r\n               // navigate('/');\r\n            } else {\r\n               console.log(\"3\")\r\n               //get user data\r\n               try {\r\n                  console.log(\"4\")\r\n                  setLoading(true);\r\n                  const response = await axios.get('/election/allUsers', {\r\n                     withCredentials: true,\r\n                  });\r\n                  setUsers(response.data.users);\r\n               } catch (err) {\r\n                  console.log(\"5\")\r\n                  notify(err.response.data.errMessage, 'error');\r\n               }\r\n               setLoading(false);\r\n            }\r\n         }\r\n      };\r\n      b();\r\n   }, []);\r\n   return (\r\n      <>\r\n         {loading && <Loading />}\r\n         <div className='flex flex-col mt-5 overflow-x-hidden overflow-y-hidden'>\r\n            <div className='-my-2 overflow-x-auto sm:-mx-8 sm:px-4 lg:px-8'>\r\n               <div className='py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8'>\r\n                  <div>\r\n                     <h2 className='mt-5 text-center text-3xl font-bold mb-8 text-gray-900'>\r\n                        All users\r\n                     </h2>\r\n                  </div>\r\n                  <div className='shadow overflow-hidden border-b border-gray-200 sm:rounded-lg'>\r\n                     <table className='min-w-full divide-y divide-gray-300 overflow-x-scroll '>\r\n                        <thead className='bg-indigo-500'>\r\n                           <tr>\r\n                              <th\r\n                                 scope='col'\r\n                                 className='px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider'\r\n                              >\r\n                                 Name\r\n                              </th>\r\n                              <th\r\n                                 scope='col'\r\n                                 className='px-6 mx-12 py-3 text-left text-xs font-medium text-white uppercase tracking-wider max-w-md'\r\n                              >\r\n                                 Ethereum Address\r\n                              </th>\r\n                              <th\r\n                                 scope='col'\r\n                                 className='px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider'\r\n                              >\r\n                                 Status\r\n                              </th>\r\n                              <th\r\n                                 scope='col'\r\n                                 className='px-2 py-3 text-left text-xs font-medium text-white uppercase tracking-wider'\r\n                              >\r\n                                 Role\r\n                              </th>\r\n                              {user && !user.electionOngoing && (\r\n                                 <th scope='col' className='relative px-6 py-3'>\r\n                                    <span className='sr-only'>Delete</span>\r\n                                 </th>\r\n                              )}\r\n                           </tr>\r\n                        </thead>\r\n                        <tbody className='bg-white divide-y divide-gray-200'>\r\n                           {users.length > 0 &&\r\n                              users.map((singleUser, element) => (\r\n                                 <ShowUser\r\n                                    key={element}\r\n                                    id={singleUser._id}\r\n                                    user={singleUser}\r\n                                    setLoading={setLoading}\r\n                                    loading={loading}\r\n                                    setUsers={setUsers}\r\n                                 />\r\n                              ))}\r\n                        </tbody>\r\n                     </table>\r\n                  </div>\r\n\r\n                  {!loading && user && !user.electionOngoing && (\r\n                     <button className='border border-transparent py-2 mt-5 w-40 rounded-md text-sm font-medium text-white bg-indigo-500 hover:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-400'>\r\n                        <Link to='/addUser'> Register user</Link>\r\n                     </button>\r\n                  )}\r\n               </div>\r\n            </div>\r\n         </div>\r\n         {!loading && users.length === 0 && <p>No user</p>}\r\n      </>\r\n   );\r\n};\r\nexport default AllUser;\r\n"]},"metadata":{},"sourceType":"module"}